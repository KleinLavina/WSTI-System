<div class="wc-list">

{% for row in summary %}
<div class="wc-item">

  <!-- LEFT : WORK INFO -->
  <div class="wc-left">

    <!-- TITLE -->
    <div class="wc-title">
      <i class="fas fa-tasks"></i>
      {{ row.workcycle__title }}
    </div>

    <!-- META -->
    <div class="wc-meta">
      <span>
        <i class="far fa-calendar-alt"></i>
        {{ row.workcycle__due_at|date:"M d, Y ¬∑ H:i" }}
      </span>
      <span class="dot">‚Ä¢</span>
      <span><strong>{{ row.total_workers }}</strong> workers</span>
    </div>

    <!-- WORK STATUS -->
    <div class="wc-section">
      <div class="wc-section-title">Work Status</div>

      <div class="wc-status-bar">
        <div class="wc-status-done"
             style="width: {{ row.done_pct|default:0 }}%"></div>
        <div class="wc-status-not-finished"
             style="width: {{ row.not_finished_pct|default:0 }}%"></div>
      </div>

      <div class="wc-status-stats">
        <span class="pill done">‚úî {{ row.done_count }} Done</span>
        <span class="pill not-finished">‚è≥ {{ row.not_finished_count }} Not Finished</span>
      </div>
    </div>

  </div>

  <!-- RIGHT : REVIEW + ACTION -->
  <div class="wc-right">

    <!-- REVIEW STATUS -->
    <div class="wc-section wc-review">

      <div class="wc-section-title text-end">Review Status</div>

      <div class="wc-review-body">
        <!-- DONUT -->
        <div class="wc-donut">
          <svg viewBox="0 0 36 36">
            <path class="wc-donut-bg"
              d="M18 2.084
                 a 15.915 15.915 0 0 1 0 31.832
                 a 15.915 15.915 0 0 1 0 -31.832"/>
            <path class="wc-donut-approved"
              stroke-dasharray="{{ row.approval_pct|default:0 }}, 100"
              d="M18 2.084
                 a 15.915 15.915 0 0 1 0 31.832
                 a 15.915 15.915 0 0 1 0 -31.832"/>
          </svg>

          <div class="wc-donut-center">
            {{ row.approval_pct|floatformat:1 }}%
          </div>
        </div>

        <!-- REVIEW COUNTS -->
        <div class="wc-review-stats">
          <div class="stat approved">‚úî {{ row.approved_count }} Approved</div>
          <div class="stat revision">üîÅ {{ row.revision_count }} Revision</div>
          <div class="stat pending">‚è≥ {{ row.pending_review_count }} Pending</div>
        </div>
      </div>
    </div>

    <!-- ACTION -->
    <a class="wc-btn"
       href="{% url 'admin_app:done-workers-by-workcycle' row.workcycle_id %}">
      <i class="fas fa-users"></i>
      View Workers
    </a>

  </div>

</div>
{% endfor %}

</div>

<style>
/* ==============================
   WORK CYCLE LIST ‚Äì MODERN UI
============================== */

.wc-list{
  display:flex;
  flex-direction:column;
  gap:16px;
}

.wc-item{
  display:flex;
  justify-content:space-between;
  gap:24px;
  padding:18px 20px;
  border-radius:16px;
  border:1px solid #e5e7eb;
  background:#fff;
  box-shadow:0 6px 18px rgba(15,23,42,.08);
  transition:.25s ease;
}

.wc-item:hover{
  transform:translateY(-3px);
  box-shadow:0 14px 34px rgba(15,23,42,.14);
}

.wc-left{ flex:1; }
.wc-right{
  min-width:240px;
  display:flex;
  flex-direction:column;
  align-items:flex-end;
  gap:10px;
}

/* TITLE + META */
.wc-title{
  font-size:1rem;
  font-weight:700;
  display:flex;
  align-items:center;
  gap:6px;
}

.wc-meta{
  margin-top:2px;
  font-size:.78rem;
  color:#6b7280;
  display:flex;
  gap:6px;
  align-items:center;
}

.dot{ opacity:.4; }

/* SECTIONS */
.wc-section{
  background:#f9fafb;
  border-radius:12px;
  padding:12px;
  margin-top:12px;
}

.wc-section-title{
  font-size:.7rem;
  font-weight:700;
  text-transform:uppercase;
  color:#6b7280;
  margin-bottom:6px;
}

/* WORK STATUS */
.wc-status-bar{
  height:8px;
  background:#e5e7eb;
  border-radius:999px;
  overflow:hidden;
  display:flex;
  margin-bottom:8px;
}

.wc-status-done{ background:#10b981; height:100%; }
.wc-status-not-finished{ background:#9ca3af; height:100%; }

.wc-status-stats{
  display:flex;
  gap:6px;
  flex-wrap:wrap;
}

.pill{
  padding:4px 10px;
  border-radius:999px;
  font-size:.7rem;
  font-weight:600;
}

.pill.done{
  background:#d1fae5;
  color:#065f46;
}

.pill.not-finished{
  background:#e5e7eb;
  color:#374151;
}

/* REVIEW */
.wc-review-body{
  display:flex;
  align-items:center;
  gap:14px;
  justify-content:flex-end;
}

.wc-donut{
  position:relative;
  width:72px;
  height:72px;
}

.wc-donut svg{
  width:100%;
  height:100%;
  transform:rotate(-90deg);
}

.wc-donut-bg{
  fill:none;
  stroke:#e5e7eb;
  stroke-width:3.8;
}

.wc-donut-approved{
  fill:none;
  stroke:#2563eb;
  stroke-width:3.8;
  stroke-linecap:round;
}

.wc-donut-center{
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:.8rem;
  font-weight:800;
  color:#2563eb;
}

.wc-review-stats{
  font-size:.75rem;
  line-height:1.4;
}

.stat.approved{ color:#065f46; }
.stat.revision{ color:#991b1b; }
.stat.pending{ color:#92400e; }

/* BUTTON */
.wc-btn{
  display:inline-flex;
  align-items:center;
  gap:6px;
  padding:7px 14px;
  border-radius:999px;
  font-size:.75rem;
  font-weight:600;
  text-decoration:none;
  color:#2563eb;
  background:#eff6ff;
  border:1px solid #bfdbfe;
  transition:.2s ease;
}

.wc-btn:hover{
  background:#2563eb;
  color:#fff;
  border-color:#2563eb;
}
</style>
