<div class="row g-4 wc-card-list">

{% for row in summary %}
<div class="col-md-6 col-xl-4">

  <div class="card wc-card h-100">
    <div class="card-body d-flex flex-column">

      <!-- HEADER -->
      <div class="wc-card-header">
        <div class="wc-title-wrap">
          <h6 class="wc-title">
            <i class="fas fa-tasks"></i>
            {{ row.workcycle__title }}
          </h6>
          <div class="wc-date">
            <i class="far fa-calendar-alt"></i>
            {{ row.workcycle__due_at|date:"M d, Y ¬∑ H:i" }}
          </div>
        </div>

        <a class="wc-btn"
           href="{% url 'admin_app:done-workers-by-workcycle' row.workcycle_id %}">
          <i class="fas fa-users"></i>
          View Workers
        </a>
      </div>

      <!-- WORK STATUS -->
      <div class="wc-section">
        <div class="wc-section-title">Work Status</div>

        <div class="wc-card-progress">
          <div class="wc-card-bar wc-card-done"
               style="width: {{ row.done_pct }}%"></div>
          <div class="wc-card-bar wc-card-not-finished"
               style="width: {{ row.not_finished_pct }}%"></div>
        </div>

        <div class="wc-card-stats">
          <span class="pill done">‚úî {{ row.done_count }} Done</span>
          <span class="pill not-finished">‚è≥ {{ row.not_finished_count }} Not Finished</span>
        </div>
      </div>

      <!-- REVIEW STATUS -->
      <div class="wc-section mt-3">
        <div class="wc-section-title">Review Decision Status</div>

        <div class="wc-card-review">
          <!-- DONUT -->
          <div class="wc-donut">
            <svg viewBox="0 0 36 36">
              <path class="wc-donut-bg"
                d="M18 2.084
                   a 15.915 15.915 0 0 1 0 31.832
                   a 15.915 15.915 0 0 1 0 -31.832"/>
              <path class="wc-donut-approved"
                stroke-dasharray="{{ row.approval_pct }}, 100"
                d="M18 2.084
                   a 15.915 15.915 0 0 1 0 31.832
                   a 15.915 15.915 0 0 1 0 -31.832"/>
            </svg>
            <div class="wc-donut-center">
              {{ row.approval_pct|floatformat:1 }}%
            </div>
          </div>

          <!-- REVIEW COUNTS -->
          <div class="wc-review-stats">
            <div class="approved">‚úî {{ row.approved_count }} Approved</div>
            <div class="revision">üîÅ {{ row.revision_count }} Revision</div>
            <div class="pending">‚è≥ {{ row.pending_review_count }} Pending</div>
          </div>
        </div>
      </div>

      <!-- FOOTER -->
      <div class="wc-card-footer mt-auto">
        <strong>{{ row.total_workers }}</strong> total workers
      </div>

    </div>
  </div>

</div>
{% endfor %}

</div>

<style>
/* ==============================
   WORK CYCLE CARDS ‚Äì POLISHED UI
============================== */

.wc-card{
  border-radius:16px;
  border:1px solid #e5e7eb;
  box-shadow:0 10px 28px rgba(15,23,42,.10);
  transition:.25s ease;
}

.wc-card:hover{
  transform:translateY(-4px);
  box-shadow:0 18px 40px rgba(15,23,42,.16);
}

/* HEADER */
.wc-card-header{
  display:flex;
  justify-content:space-between;
  gap:14px;
  margin-bottom:14px;
}

.wc-title{
  font-size:.95rem;
  font-weight:700;
  margin:0;
  display:flex;
  align-items:center;
  gap:6px;
}

.wc-date{
  font-size:.75rem;
  color:#6b7280;
  display:flex;
  align-items:center;
  gap:4px;
}

/* BUTTON */
.wc-btn{
  display:inline-flex;
  align-items:center;
  gap:6px;
  padding:6px 12px;
  border-radius:999px;
  font-size:.75rem;
  font-weight:600;
  text-decoration:none;
  color:#2563eb;
  background:#eff6ff;
  border:1px solid #bfdbfe;
  transition:.2s ease;
}

.wc-btn:hover{
  background:#2563eb;
  color:#fff;
  border-color:#2563eb;
}

/* SECTION */
.wc-section{
  background:#f9fafb;
  border-radius:12px;
  padding:12px;
}

.wc-section-title{
  font-size:.7rem;
  font-weight:700;
  color:#6b7280;
  text-transform:uppercase;
  margin-bottom:8px;
}

/* PROGRESS */
.wc-card-progress{
  height:8px;
  background:#e5e7eb;
  border-radius:999px;
  overflow:hidden;
  display:flex;
  margin-bottom:8px;
}

.wc-card-bar{ height:100%; }
.wc-card-done{ background:#10b981; }
.wc-card-not-finished{ background:#9ca3af; }

/* PILLS */
.wc-card-stats{
  display:flex;
  gap:6px;
  flex-wrap:wrap;
  font-size:.72rem;
}

.pill{
  padding:4px 10px;
  border-radius:999px;
  font-weight:600;
}

.pill.done{
  background:#d1fae5;
  color:#065f46;
}

.pill.not-finished{
  background:#e5e7eb;
  color:#374151;
}

/* REVIEW */
.wc-card-review{
  display:flex;
  align-items:center;
  gap:16px;
}

/* DONUT */
.wc-donut{
  position:relative;
  width:72px;
  height:72px;
}

.wc-donut svg{
  width:100%;
  height:100%;
  transform:rotate(-90deg);
}

.wc-donut-bg{
  fill:none;
  stroke:#e5e7eb;
  stroke-width:3.8;
}

.wc-donut-approved{
  fill:none;
  stroke:#2563eb;
  stroke-width:3.8;
  stroke-linecap:round;
}

.wc-donut-center{
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:.8rem;
  font-weight:800;
  color:#2563eb;
}

/* REVIEW COUNTS */
.wc-review-stats{
  font-size:.75rem;
  display:flex;
  flex-direction:column;
  gap:4px;
}

.wc-review-stats .approved{ color:#065f46; }
.wc-review-stats .revision{ color:#991b1b; }
.wc-review-stats .pending{ color:#92400e; }

/* FOOTER */
.wc-card-footer{
  text-align:center;
  margin-top:14px;
  font-size:.75rem;
  color:#6b7280;
  padding-top:8px;
  border-top:1px dashed #e5e7eb;
}
</style>
